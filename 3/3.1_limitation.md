# 使用限制

## 限制

* 仅支持 MySQL 5.6/5.7 版本
* 仅支持 InnoDB 引擎
* 仅支持以下字符集:
  * latin1
  * latin2
  * gbk
  * utf8
  * utf8mb4
  * binary
* binlog 仅支持`row`模式
* binlog image 仅支持`FULL`模式
* 源端和目标端大小写敏感配置 \(`lower_case_table_names`\) 需保持一致 
* 需要开启 GTID
* 不支持 Trigger
* 暂不支持 View
* 全量过程中, 源端DDL无法顺利执行（由于使用了一致性快照）
* 全量过程不支持断点续传，人为暂停或出错需要重新开始全量复制
* 源端binlog必须保留足够长的时间，否则增量过程将报错
  * 如，设定足够长的 `expire_logs_days`
* 允许复制无主键表，但数据量大时全量复制将会变慢
* 增量过程中，只能执行部分DDL操作，见 [3.6.DDL支持度](./3.6_DDL.md)
* 支持procedure，function，event的增量部分迁移（须创建库级别的迁移job），但存在源端与目标端字符集不完全一致的问题
* 支持user增量部分的迁移（须创建实例级别的迁移job），且支持grant，revoke（要求回放用户有`grant option`）
* 只支持MySQL认证方式 `mysql_native_password`, 不支持其他类型的`default_authentication_plugin`
* 在dts的增量复制过程中，如果源端执行replace into语句或者执行产生Duplicate entry冲突insert语句，可能导致目标端的 AUTO\_INCREMENT值和源端不一致（[MySQL Bug\#83030](https://bugs.mysql.com/bug.php?id=83030&tdsourcetag=s_pctim_aiomsg)）
* 任务进行时，复制所用的MySQL地址、端口、用户、密码不可改变

## 源端 MySQL 需配置如下参数

| 参数 | 值 | 检查方式 |
| --- | --- | --- |
| log\_bin | ON | show global variables like 'log\_bin'; |
| binlog\_format | ROW | show global variables like 'binlog\_format'; |
| binlog\_row\_image | FULL | show global variables like 'binlog\_row\_image'; |
| log\_slave\_updates | ON | show global variables like 'log\_slave\_updates'; |
| gtid\_mode | ON | show global variables like 'gtid\_mode'; |



